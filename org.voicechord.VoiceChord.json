{
  "app-id": "org.voicechord.VoiceChord",
  "runtime": "org.gnome.Platform",
  "runtime-version": "47",
  "sdk": "org.gnome.Sdk",
  "command": "voice-chord",
  "finish-args": [
    "--share=ipc",
    "--socket=x11",
    "--socket=wayland",
    "--socket=pulseaudio",
    "--device=dri",
    "--filesystem=xdg-music:rw",
    "--filesystem=xdg-documents:rw",
    "--filesystem=home:ro",
    "--talk-name=org.freedesktop.portal.Desktop",
    "--talk-name=org.freedesktop.portal.FileChooser",
    "--system-talk-name=org.freedesktop.RealtimeKit1"
  ],
  "modules": [
    {
      "name": "fluidsynth",
      "buildsystem": "cmake-ninja",
      "config-opts": [
        "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
        "-Denable-jack=OFF",
        "-Denable-alsa=ON",
        "-Denable-oss=OFF",
        "-Denable-pulseaudio=ON",
        "-Denable-ladspa=OFF",
        "-Denable-aufile=OFF",
        "-Denable-network=OFF",
        "-Denable-ipv6=OFF",
        "-Denable-getopt=OFF",
        "-Denable-shell=OFF"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/FluidSynth/fluidsynth/archive/v2.3.4.tar.gz",
          "sha256": "1529ef5bc3b9ef3adc2a7964505912f7305103e269e50cc0316f500b22053ac9"
        }
      ]
    },
    {
      "name": "voice-chord",
      "buildsystem": "simple",
      "build-commands": [
        "install -Dm755 run.sh /app/bin/voice-chord",
        "install -Dm644 main.js /app/share/voice-chord/main.js",
        "install -Dm644 audioProcessor.js /app/share/voice-chord/audioProcessor.js",
        "install -Dm644 chordDetector.js /app/share/voice-chord/chordDetector.js",
        "install -Dm644 midiController.js /app/share/voice-chord/midiController.js",
        "install -Dm644 sequencer.js /app/share/voice-chord/sequencer.js",
        "install -Dm644 fluidsynthController.js /app/share/voice-chord/fluidsynthController.js",
        "install -Dm644 enhancedAudioProcessor.js /app/share/voice-chord/enhancedAudioProcessor.js",
        "install -Dm644 enhancedDetector.js /app/share/voice-chord/enhancedDetector.js",
        "install -Dm644 enhancedSequencer.js /app/share/voice-chord/enhancedSequencer.js",
        "install -Dm644 style.css /app/share/voice-chord/style.css",
        "install -Dm644 'Yamaha XG Sound Set.sf2' '/app/share/voice-chord/Yamaha XG Sound Set.sf2'",
        "install -Dm644 icon.svg /app/share/icons/hicolor/scalable/apps/org.voicechord.VoiceChord.svg",
        "install -Dm644 org.voicechord.VoiceChord.desktop /app/share/applications/org.voicechord.VoiceChord.desktop",
        "install -Dm644 README.md /app/share/doc/voice-chord/README.md",
        "sed -i 's|gjs main.js|cd /app/share/voice-chord \\&\\& gjs main.js|' /app/bin/voice-chord"
      ],
      "sources": [
        {
          "type": "dir",
          "path": "."
        }
      ]
    }
  ]
}
